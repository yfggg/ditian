<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.test.ditian.mapper.TeacherMapper">

    <resultMap type="com.test.ditian.domain.Teacher" id="TeacherResult">
        <id     property="id"              column="id"                  />
        <result property="schoolId"        column="school_id"           />
        <result property="teacherCode"     column="teacher_code"        />
        <result property="avatar"          column="avatar"              />
        <result property="userName"        column="user_name"           />
        <result property="sex"             column="sex"                 />
        <result property="title"           column="title"               />
        <result property="subject"         column="subject"             />
        <result property="phone"           column="phone"               />
        <result property="startTeachDate"  column="start_teach_date"    />
        <result property="createAt"        column="create_at"           />
        <result property="updateAt"        column="update_at"           />
    </resultMap>

    <select id="selectTeacherById" parameterType="Long" resultMap="TeacherResult">
        select id, school_id, teacher_code, avatar from teacher where id = #{id}
    </select>

    <insert id="insertTeacher" parameterType="com.test.ditian.domain.Teacher" useGeneratedKeys="true" keyProperty="id">
        insert into teacher(
        <if test="id != null and id != 0">id,</if>
        <if test="schoolId != null and schoolId != 0">school_id,</if>
        <if test="teacherCode != null and teacherCode != 0">teacher_code</if>

        )values(
        <if test="id != null and id != ''">#{id},</if>
        <if test="schoolId != null and schoolId != ''">#{schoolId},</if>
        <if test="teacherCode != null and teacherCode != ''">#{teacherCode}</if>
        )
    </insert>

    <update id="updateTeacher" parameterType="com.test.ditian.domain.Teacher">
        update teacher
        <set>
            <if test="schoolId != null and schoolId != 0">school_id = #{schoolId},</if>
            <if test="teacherCode != null and teacherCode != ''">teacher_code = #{teacherCode},</if>
        </set>
        where id = #{id}
    </update>

    <delete id="deleteTeacherById" parameterType="Long">
 		delete from teacher where id = #{id}
 	</delete>

</mapper>